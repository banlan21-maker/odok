# Firebase Functions 환경 변수 확인 및 설정 가이드

## 프로젝트 정보
- 프로젝트 ID: `odok-odok-final`
- Functions 리전: `asia-northeast3`

## 2번 확인: Firebase Console 환경 변수 확인

### 방법 1: Firebase Console (웹 UI)

1. **Firebase Console 접속**
   - https://console.firebase.google.com 접속
   - 프로젝트 `odok-odok-final` 선택

2. **Functions 페이지로 이동**
   - 왼쪽 메뉴에서 **Functions** 클릭
   - 또는 URL: https://console.firebase.google.com/project/odok-odok-final/functions

3. **환경 변수 확인**
   - Functions 페이지 상단에 **"환경 변수"** 또는 **"Environment variables"** 탭이 있는지 확인
   - 또는 Functions 목록에서 특정 함수를 선택하고 설정 탭에서 환경 변수 확인

4. **환경 변수 설정 (없는 경우)**
   - 변수 이름: `GEMINI_API_KEY`
   - 변수 값: `<YOUR_GEMINI_API_KEY>`

### 방법 2: Firebase CLI로 확인

터미널에서 다음 명령어 실행:

```bash
# 프로젝트 디렉토리에서
cd functions

# 환경 변수 확인 (Functions v1 방식)
firebase functions:config:get

# Functions v2에서는 Secrets를 사용할 수도 있음
firebase functions:secrets:access GEMINI_API_KEY
```

### 주의사항

Firebase Functions v2에서는 환경 변수 설정 방법이 다를 수 있습니다:
- **Functions v1**: `firebase functions:config:set` 사용
- **Functions v2**: Secrets Manager 또는 환경 변수 직접 설정

## 3번 확인: Functions 재배포

### 배포 상태 확인

1. **Firebase Console에서 확인**
   - Functions 페이지에서 배포된 함수 목록 확인
   - `generateBookAI` 함수가 있는지 확인
   - 최근 배포 시간 확인

2. **CLI로 재배포**

```bash
# 프로젝트 루트 디렉토리에서
cd functions

# Functions 재배포
firebase deploy --only functions

# 또는 특정 함수만 배포
firebase deploy --only functions:generateBookAI
```

### 배포 후 확인사항

1. 배포가 성공했는지 확인
2. Functions 로그에서 API 키 확인 메시지 확인
3. 실제로 책 생성 기능 테스트
